define("common:widget/ui/operateMediator/operateMediator.js",function(a,o,n){var e=0,t=1,i=a("common:widget/ui/ui3MobileDownload/ui3MobileDownload.js"),p={init:function(){var a=this;T.ajax("/",{data:{qt:"operateData",getOpModules:["op1","op2","op3","op4","op5","op6","op7"]},dataType:"json",traditional:!0,success:function(o){if(0===o.status){var n=o.data;T.each(n,function(a,o){listener.trigger("operateMediator."+a,"init",o)}),listener.on("operateMediator",function(n,e){var t=o.data;a.pipe(e,t,n)})}},error:function(){a.retry()}})},retry:function(){e>=t||(e++,this.init())},pipe:function(a,o,n){var e=o[a.opid],t=o.op7;if(e){var i=e.bannerImg,p=e.backgroundImg;if(i){T.extend(e,a,t),p||(e.backgroundImg="http://webmap2.map.bdstatic.com/wolfman/static/common/images/ui3/luhan_23282dd.png");var d=e.contentList;d&&d.length>4&&(d=d.slice(0,4)),"function"==typeof this[n]&&this[n].call(this,e),"display"===n?addStat("op-banner-"+e.opid,"show",{da_e_name:"pcmap3"}):"openPop"===n&&addStat("op-banner-"+e.opid,"click",{da_e_name:"pcmap3"})}}},initOpBanner:function(a){T.each(a,function(a,o){listener.trigger("operateMediator","display",{opid:o.opid,opTarget:o.bannerWrap}),o.bannerWrap.delegate("img","click",function(){listener.trigger("operateMediator","openPop",{opid:o.opid})}),o.bannerWrap.delegate("a","click",function(){var a=T(this);listener.trigger("operateMediator","download",{opTarget:a,opid:o.opid})})})},display:function(a){a.opTarget.addClass("op-banner").attr("opid",a.opid).show().append('<img src="'+a.bannerImg+'" />')},openPop:function(a){i.openPop(a)},download:function(a){var o=a.opTarget;"pc2MoAndriod"===o.attr("class")?(T("[name=andriodApk]").attr("src","http://map.baidu.com/maps/download/index.php?app=map&qudao="+a.qudao),i.openDownloadPop(a),addStat("op-banner-"+a.opid+"-bannerAndriod","click",{da_e_name:"pcmap3"})):"pc2MoIphone"===o.attr("class")&&(window.open("http://itunes.apple.com/cn/app/id452186370?ls=1&mt=8"),i.openDownloadPop(a),addStat("op-banner-"+a.opid+"-bannerIos","click",{da_e_name:"pcmap3"}))}};n.exports=p});