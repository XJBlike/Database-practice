define("common:widget/com/BaseSearchComponent.js",function(e,t,i){function o(e){e=e||{},a.call(this,e),this.cinfo=e.cinfo||{},this.MAX_RESULT_COUNT=760,this.itemsPerPage=10,this.curSelA=null,this.cmdNo=45,this.sCityCode=0,this.sCityName="",this.reIndex=[],this.beforeInt(),this.setPanoStatus(e),this.setPlaceData(),this.setSateState(),window.isPrint||l.clearInit()}function n(e){return 11!=e.type&&1==e.op_gel}function s(e){return 21==e.type||39==e.type}var a=e("common:widget/com/MapComponent.js"),r=e("common:widget/ui/config/config.js"),c=e("common:widget/ui/util/util.js"),l=e("common:widget/ui/ClearBase/ClearBase.js"),h=e("common:widget/search/SearchUrlParam.js"),u=e("common:widget/search/filters/SearchFilter/FilterConfig.js"),d=(e("common:widget/ui/mapInfoScroll/mapInfoScroll.js"),e("common:widget/ui/genericRequest/GenericRequest.js"));window.GRControll||(window.GRControll=new d({}));var p=(r.mapConfig,r.modelConfig),m=(u.movieReg,u.hasFilterReg);T.inherits(o,a,"BaseSearch"),T.extend(o.prototype,{beforeInt:function(){{var e=this.json,t=e.result;e.content}this.curKw=t.return_query||t.wd,this.what=t.what||t.wd,this.sugKw=t.wd2||"",this.isGRequest=n(t),window.GRControll.isGRequest=this.isGRequest,this.isSearchInView=s(t),this.cmdNo=t.cmd_no,this.business_scope_type=t.business_scope_type,e.current_city?(this.sCityCode=e.current_city.code,this.sCityName=e.current_city.name,this.ctype=e.current_city.type):(this.sCityCode=p.cityCode,this.sCityName=p.cityName);var i=c.getParam("?qt="+window.currentComponent.modelQuery);i&&i.gr_radius&&(window.GRControll.GRCircleRadius=i.gr_radius),this.resizeContent()},render:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"common:widget/com/BaseSearchComponent.js",ln:113})}},initialize:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"common:widget/com/BaseSearchComponent.js",ln:118})}},resizeContent:function(){var e=T("#MapInfo"),t=c.getMapSize(),i=t.height;e.height(i)},customScrollPanel:function(){var e=T("#MapInfo .poi-wrapper").get(0);this.scrollPanel=new baidu.ui.ScrollPanel({container:e,overflow:"overflow-y",autoUpdate:!1,margin:[5,5,0,0]}),this.scrollPanel&&this.scrollPanel.render(e)},unload:function(){window.clearClarify&&clearClarify(),window.GRControll.clearCache(),this.clearGrStatus(),this.clearPlace(),a.prototype.unload.apply(this)},setPanoStatus:function(e){{var t=(e.from||"",this.cinfo.genRequestKey,this.cinfo||{});t.isClickNextPage,t.isFilter||!1}window.PanoMap&&window.PanoMap.isOpen&&!window.GRControll.isGRequest&&PanoMap.hide()},setPlaceData:function(){var e=this.json;e.place_info&&(place.result=m.test(e.place_info.d_data_type),place.categoryType=e.place_info.d_data_type,h.setPlaceParams(e)),place.place_dateType=null,place.urlParams=""},setGrRequest:function(e){var t=this.json;if(this.isGRequest){if(window.GRControll.setGRequestFlg(500),window.GRControll.setGRData(this.json,{cinfo:this.cinfo,pageReq:e,guid:this.guid}),this.cinfo&&this.cinfo._index&&this.cinfo._index.indexOf("uid,")>=0){var i=this.cinfo._index.split("uid,")[1];window.GRControll.sendInfoRequest(i)}}else 38==t.result.type&&(window.GRControll.clearCache(),window.GRControll.clearGRMap())},setSateState:function(){1===this.json.result.pattern_sign&&sateCityList.isSateMapSupportCity(this.sCityCode)&&(map.setMapType(BMAP_SATELLITE_MAP),map.showStreetLayer(!0))},clearGrStatus:function(){if(11!=this.json.result.type&&window.GRControll.clearCache(),this.json&&this.json.result){var e=this.json.result.type;36!=e&&38!=e&&39!=e&&(GRControll.clearGRMap(),GRControll.clearListener(),GRControll.clearCache())}this.json=null},clearPlace:function(){place.result=!1,place.place_dateType=null,h.clearParams()}}),i.exports=o});